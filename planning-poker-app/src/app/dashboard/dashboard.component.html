<div class="dashboard">
  <header class="header">
    <div class="title-container">
      <input
        class="title-input"
        type="text"
        [ngModel]="roomTitle()"
        (ngModelChange)="roomTitle.set($event)"
        placeholder="Sprint Planning Poker"
      />
      <div class="room-info">
        <span class="room-id">Room ID: {{ roomId() }}</span>
        <button class="copy-button" (click)="copyRoomLink()">📋 Copy Link</button>
      </div>
      <div class="user-info">
        <span class="user-name">Your name: {{ userName() }}</span>
        <button class="user-button" (click)="promptForUserName()">✏️ Change</button>
      </div>
    </div>
  </header>
  <main>
    <app-poker-table
      [participants]="participants()"
      (participantsChange)="updateParticipants($event)"
      (isRevealInProgressChange)="isRevealInProgress.set($event)">
    </app-poker-table>
  </main>
  <section class="card-selection">
    <h2 class="card-selection-header">
      {{ areCardsRevealed() || isRevealInProgress() ? 'Cards Locked' : 'Pick a Card!' }}
    </h2>
    <div class="card-selection-content">
      <div class="cards"
        [class.disabled]="areCardsRevealed() || isRevealInProgress()"
        [attr.aria-disabled]="areCardsRevealed() || isRevealInProgress()">
        @for (card of cards(); track card) {
          <app-card
            [value]="card"
            [selected]="selectedCard() === card"
            [revealed]="true"
            [disabled]="areCardsRevealed() || isRevealInProgress()"
            (click)="handleCardClick(card)">
          </app-card>
        }
      </div>
    </div>
  </section>
</div>
